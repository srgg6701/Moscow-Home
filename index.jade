doctype html
html(lang="en")
  head
    -var pageTitle = "Home Moscow"
    title= pageTitle
  body
    header
        nav
            menu
                -var menuItems=["О компании", "Услуги", "Галерея", "Контакты"]
                each item in menuItems
                    li
                        a(href="#")=item
            a.logo(href="index.html")
            -var phone_number="+7 (495) 890-90-90"
            span.phone_number=phone_number
            a#consulting(href="")="Консультация"
    main
        #slider
            #go-left
            #go-right
            #showcase
        #you-need.header-slim-big="Вам необходимо"
        menu.you-need
            each text,link in {'#':"Проектирование и дизайн",'#':"Кровельные и фасадные работы",'#':"Общестроительные и отделочные работы",'#':"Инженерные системы"}
                li(title=text)
                    a(href=link)=text
        #gallery.header-slim-big="Галерея"
        #slider-bottom
    footer
        .float-left="Строительство элитной недвижимости с 2004 г."
        a.logo(href="index.html")
        span.phone_number=phone_number
    script(type='text/javascript').
        $(function () {
            //console.log('location.href = '+location.href);
            // todo: remove on production
            // ----------------------------------------------------
            // Загрузить тестовый компонент
            if (( location.href.indexOf('localhost') != -1
                      || location.href.indexOf('127.0.0.1') != -1)
                      && location.href.indexOf('?') != -1) {
                document.title = window.outerWidth;
                window.onresize = function () {
                      document.title = window.outerWidth;
                };
                //
                var tail = location.href.lastIndexOf('/') + 1,
                    urlBase = location.href.substring(0, tail),
                    params = location.href.substr(tail);
                //console.log('params: ' + params);
                $.get(urlBase + '_dev/debug/dev.php' + params,
                    function (data) {
                        //console.log('data: '+data);
                        $('body').prepend(data);
                        loadTemplate();
                    });
            } else {
                console.log('No url params...');
                loadTemplate();
            }
          });
          // info: удалить (если используются серверные сценарии) или модифицировать (если используется JS-framework).
          // Разобраться с загружаемым шаблоном
          function loadTemplate() {
              var segment_pos,
                      section = 'home'; // шаблон, загружаемый по умолчанию
              if ((segment_pos = location.href.indexOf('=')) != -1) { // если найдено, возвращает позицию, с которой будем начинать извлекать section (после сдвига на 1)
                  segment_pos += 1; // скорректировать позицию
                  section = (location.href.indexOf('&') != -1) ?
                      location.href.substring(segment_pos, location.href.indexOf('&')) : location.href.substring(segment_pos);
              }
              //console.log('url: templates/'+section+'.html');
              // Загрузить шаблон в <main>
              $('main').load('templates/' + section + '.html');
          }