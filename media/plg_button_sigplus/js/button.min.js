/*
 sigplus editor button
 @author  Levente Hunyadi
 @version 1.5.0
 @remarks Copyright (C) 2011-2012 Levente Hunyadi
 @remarks Licensed under GNU/GPLv3, see http://www.gnu.org/licenses/gpl-3.0.html
 @see     http://hunyadi.info.hu/projects/sigplus
*/
window.addEvent("domready",function(){function e(b){b=b.get("name");var a=b.match(/^params\[(.*)\]$/);return a?a[1]:b}var d=document.id("sigplus-settings-form");window.parent.sigplus&&d.getElements("input[type=checkbox],input[type=radio],input[type=text],select").each(function(b){var a=e(b);if(a=window.parent.sigplus[a])if(b.match("input[type=checkbox]"))b.set("checked",a);else if(b.match("input[type=radio]")&&b.value===""+a)b.set("checked",!0);else if(b.match("input[type=text],select"))b.value=a});
d.getElements("li").each(function(b){var a=new Element("input",{type:"checkbox"});b.getElements("input[type=checkbox],input[type=radio],input[type=text],select").addEvent("focus",function(){a.set("checked",!0)});a.inject(b,"top")});document.id("sigplus-settings-submit").addEvent("click",function(){var b="";d.getElements("li").each(function(a){var c=a.getFirst("input[type=checkbox]");if((a=a.getElements("input[type=checkbox]:checked,input[type=radio]:checked,input[type=text],select").erase(c).pick())&&
c&&c.get("checked"))if(c=e(a),a=a.value){if(/color$/.test(c)||!/^(0|[1-9]\d*)$/.test(a))a='"'+a+'"';b+=" "+c+"="+a}});window.parent&&window.parent.sigplusOnInsertTag(b)})});
