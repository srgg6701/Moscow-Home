if(Slider===void 0){MooTools.More={version:"1.4.0.1",build:"a4244edf2aa97ac8a196fc96082dd35af1abab87"};var Drag=new Class({Implements:[Events,Options],options:{snap:6,unit:"px",grid:!1,style:!0,limit:!1,handle:!1,invert:!1,preventDefault:!1,stopPropagation:!1,modifiers:{x:"left",y:"top"}},initialize:function(){var a=Array.link(arguments,{options:Type.isObject,element:function(a){return a!=null}});this.element=document.id(a.element);this.document=this.element.getDocument();this.setOptions(a.options||
{});a=typeOf(this.options.handle);this.handles=(a=="array"||a=="collection"?$$(this.options.handle):document.id(this.options.handle))||this.element;this.mouse={now:{},pos:{}};this.value={start:{},now:{}};this.selection=Browser.ie?"selectstart":"mousedown";if(Browser.ie&&!Drag.ondragstartFixed)document.ondragstart=Function.from(!1),Drag.ondragstartFixed=!0;this.bound={start:this.start.bind(this),check:this.check.bind(this),drag:this.drag.bind(this),stop:this.stop.bind(this),cancel:this.cancel.bind(this),
eventStop:Function.from(!1)};this.attach()},attach:function(){this.handles.addEvent("mousedown",this.bound.start);return this},detach:function(){this.handles.removeEvent("mousedown",this.bound.start);return this},start:function(a){var b=this.options;if(!a.rightClick){b.preventDefault&&a.preventDefault();b.stopPropagation&&a.stopPropagation();this.mouse.start=a.page;this.fireEvent("beforeStart",this.element);var c=b.limit;this.limit={x:[],y:[]};var d,e;for(d in b.modifiers)if(b.modifiers[d]){var f=
this.element.getStyle(b.modifiers[d]);f&&!f.match(/px$/)&&(e||(e=this.element.getCoordinates(this.element.getOffsetParent())),f=e[b.modifiers[d]]);this.value.now[d]=b.style?(f||0).toInt():this.element[b.modifiers[d]];b.invert&&(this.value.now[d]*=-1);this.mouse.pos[d]=a.page[d]-this.value.now[d];if(c&&c[d])for(f=2;f--;){var g=c[d][f];if(g||g===0)this.limit[d][f]=typeof g=="function"?g():g}}if(typeOf(this.options.grid)=="number")this.options.grid={x:this.options.grid,y:this.options.grid};a={mousemove:this.bound.check,
mouseup:this.bound.cancel};a[this.selection]=this.bound.eventStop;this.document.addEvents(a)}},check:function(a){this.options.preventDefault&&a.preventDefault();Math.round(Math.sqrt(Math.pow(a.page.x-this.mouse.start.x,2)+Math.pow(a.page.y-this.mouse.start.y,2)))>this.options.snap&&(this.cancel(),this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop}),this.fireEvent("start",[this.element,a]).fireEvent("snap",this.element))},drag:function(a){var b=this.options;b.preventDefault&&
a.preventDefault();this.mouse.now=a.page;for(var c in b.modifiers)if(b.modifiers[c]){this.value.now[c]=this.mouse.now[c]-this.mouse.pos[c];b.invert&&(this.value.now[c]*=-1);if(b.limit&&this.limit[c])if((this.limit[c][1]||this.limit[c][1]===0)&&this.value.now[c]>this.limit[c][1])this.value.now[c]=this.limit[c][1];else if((this.limit[c][0]||this.limit[c][0]===0)&&this.value.now[c]<this.limit[c][0])this.value.now[c]=this.limit[c][0];b.grid[c]&&(this.value.now[c]-=(this.value.now[c]-(this.limit[c][0]||
0))%b.grid[c]);b.style?this.element.setStyle(b.modifiers[c],this.value.now[c]+b.unit):this.element[b.modifiers[c]]=this.value.now[c]}this.fireEvent("drag",[this.element,a])},cancel:function(a){this.document.removeEvents({mousemove:this.bound.check,mouseup:this.bound.cancel});a&&(this.document.removeEvent(this.selection,this.bound.eventStop),this.fireEvent("cancel",this.element))},stop:function(a){var b={mousemove:this.bound.drag,mouseup:this.bound.stop};b[this.selection]=this.bound.eventStop;this.document.removeEvents(b);
a&&this.fireEvent("complete",[this.element,a])}});Element.implement({makeResizable:function(a){var b=new Drag(this,Object.merge({modifiers:{x:"width",y:"height"}},a));this.store("resizer",b);return b.addEvent("drag",function(){this.fireEvent("resize",b)}.bind(this))}});Class.Mutators.Binds=function(a){this.prototype.initialize||this.implement("initialize",function(){});return Array.from(a).concat(this.prototype.Binds||[])};Class.Mutators.initialize=function(a){return function(){Array.from(this.Binds).each(function(a){var c=
this[a];c&&(this[a]=c.bind(this))},this);return a.apply(this,arguments)}};(function(){var a=function(a,b){var e=[];Object.each(b,function(b){Object.each(b,function(b){a.each(function(a){e.push(a+"-"+b+(a=="border"?"-width":""))})})});return e},b=function(a,b){var e=0;Object.each(b,function(b,d){d.test(a)&&(e+=b.toInt())});return e};Element.implement({measure:function(a){if(!this||this.offsetHeight||this.offsetWidth)return a.call(this);for(var b=this.getParent(),e=[];b&&!b.offsetHeight&&!b.offsetWidth&&
b!=document.body;)e.push(b.expose()),b=b.getParent();b=this.expose();a=a.call(this);b();e.each(function(a){a()});return a},expose:function(){if(this.getStyle("display")!="none")return function(){};var a=this.style.cssText;this.setStyles({display:"block",position:"absolute",visibility:"hidden"});return function(){this.style.cssText=a}.bind(this)},getDimensions:function(a){a=Object.merge({computeSize:!1},a);var b={x:0,y:0},e=this.getParent("body");if(e&&this.getStyle("display")=="none")b=this.measure(function(){return a.computeSize?
this.getComputedSize(a):this.getSize()});else if(e)try{b=a.computeSize?this.getComputedSize(a):this.getSize()}catch(f){}return Object.append(b,b.x||b.x===0?{width:b.x,height:b.y}:{x:b.width,y:b.height})},getComputedSize:function(c){c=Object.merge({styles:["padding","border"],planes:{height:["top","bottom"],width:["left","right"]},mode:"both"},c);var d={},e={width:0,height:0},f;c.mode=="vertical"?(delete e.width,delete c.planes.width):c.mode=="horizontal"&&(delete e.height,delete c.planes.height);
a(c.styles,c.planes).each(function(a){d[a]=this.getStyle(a).toInt()},this);Object.each(c.planes,function(a,c){var i=c.capitalize(),h=this.getStyle(c);h=="auto"&&!f&&(f=this.getDimensions());h=d[c]=h=="auto"?f[c]:h.toInt();e["total"+i]=h;a.each(function(a){var c=b(a,d);e["computed"+a.capitalize()]=c;e["total"+i]+=c})},this);return Object.append(e,d)}})})();var Slider=new Class({Implements:[Events,Options],Binds:["clickedElement","draggedKnob","scrolledElement"],options:{onTick:function(a){this.setKnobPosition(a)},
initialStep:0,snap:!1,offset:0,range:!1,wheel:!1,steps:100,mode:"horizontal"},initialize:function(a,b,c){this.setOptions(c);c=this.options;this.element=document.id(a);b=this.knob=document.id(b);this.previousChange=this.previousEnd=this.step=-1;a={};var d={x:!1,y:!1};switch(c.mode){case "vertical":this.axis="y";this.property="top";this.offset="offsetHeight";break;case "horizontal":this.axis="x",this.property="left",this.offset="offsetWidth"}this.setSliderDimensions();this.setRange(c.range);b.getStyle("position")==
"static"&&b.setStyle("position","relative");b.setStyle(this.property,-c.offset);d[this.axis]=this.property;a[this.axis]=[-c.offset,this.full-c.offset];a={snap:0,limit:a,modifiers:d,onDrag:this.draggedKnob,onStart:this.draggedKnob,onBeforeStart:function(){this.isDragging=!0}.bind(this),onCancel:function(){this.isDragging=!1}.bind(this),onComplete:function(){this.isDragging=!1;this.draggedKnob();this.end()}.bind(this)};c.snap&&this.setSnap(a);this.drag=new Drag(b,a);this.attach();c.initialStep!=null&&
this.set(c.initialStep)},attach:function(){this.element.addEvent("mousedown",this.clickedElement);this.options.wheel&&this.element.addEvent("mousewheel",this.scrolledElement);this.drag.attach();return this},detach:function(){this.element.removeEvent("mousedown",this.clickedElement).removeEvent("mousewheel",this.scrolledElement);this.drag.detach();return this},autosize:function(){this.setSliderDimensions().setKnobPosition(this.toPosition(this.step));this.drag.options.limit[this.axis]=[-this.options.offset,
this.full-this.options.offset];this.options.snap&&this.setSnap();return this},setSnap:function(a){if(!a)a=this.drag.options;a.grid=Math.ceil(this.stepWidth);a.limit[this.axis][1]=this.full;return this},setKnobPosition:function(a){this.options.snap&&(a=this.toPosition(this.step));this.knob.setStyle(this.property,a);return this},setSliderDimensions:function(){this.full=this.element.measure(function(){this.half=this.knob[this.offset]/2;return this.element[this.offset]-this.knob[this.offset]+this.options.offset*
2}.bind(this));return this},set:function(a){if(!(this.range>0^a<this.min))a=this.min;if(!(this.range>0^a>this.max))a=this.max;this.step=Math.round(a);return this.checkStep().fireEvent("tick",this.toPosition(this.step)).end()},setRange:function(a,b){this.min=Array.pick([a[0],0]);this.max=Array.pick([a[1],this.options.steps]);this.range=this.max-this.min;this.steps=this.options.steps||this.full;this.stepSize=Math.abs(this.range)/this.steps;this.stepWidth=this.stepSize*this.full/Math.abs(this.range);
a&&this.set(Array.pick([b,this.step]).floor(this.min).max(this.max));return this},clickedElement:function(a){if(!(this.isDragging||a.target==this.knob)){var b=this.range<0?-1:1;a=a.page[this.axis]-this.element.getPosition()[this.axis]-this.half;a=a.limit(-this.options.offset,this.full-this.options.offset);this.step=Math.round(this.min+b*this.toStep(a));this.checkStep().fireEvent("tick",a).end()}},scrolledElement:function(a){this.set(this.step+((this.options.mode=="horizontal"?a.wheel<0:a.wheel>0)?
-1:1)*this.stepSize);a.stop()},draggedKnob:function(){var a=this.range<0?-1:1,b=this.drag.value.now[this.axis];b=b.limit(-this.options.offset,this.full-this.options.offset);this.step=Math.round(this.min+a*this.toStep(b));this.checkStep()},checkStep:function(){var a=this.step;if(this.previousChange!=a)this.previousChange=a,this.fireEvent("change",a);return this},end:function(){var a=this.step;if(this.previousEnd!==a)this.previousEnd=a,this.fireEvent("complete",a+"");return this},toStep:function(a){a=
(a+this.options.offset)*this.stepSize/this.full*this.steps;return this.options.steps?Math.round(a-a%this.stepSize):a},toPosition:function(a){return this.full*Math.abs(this.min-a)/(this.steps*this.stepSize)-this.options.offset}})};
